<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="QuizIt - A powerful flashcard PWA for effective learning">
    <meta name="theme-color" content="#6366f1">
    <title>QuizIt - Your Study Sets</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/themes.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">QuizIt</h1>
                <div class="header-actions">
                    <button id="themeToggle" class="icon-btn" title="Toggle theme">
                        <span class="theme-icon">ğŸŒ™</span>
                    </button>
                    <button id="installBtn" class="btn btn-primary" style="display: none;">
                        Install App
                    </button>
                </div>
            </div>
            <nav class="main-nav">
                <a href="index.html" class="nav-link active">My Sets</a>
                <a href="create.html" class="nav-link">Create Set</a>
                <button id="importSetBtn" class="nav-link" style="background: none; border: none; cursor: pointer;">ğŸ“¥ Import Set</button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Search and Filter -->
                <div class="search-section">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search your sets..." class="search-input">
                        <button id="searchBtn" class="icon-btn">ğŸ”</button>
                    </div>
                    <div class="filter-options">
                        <label>
                            <input type="checkbox" id="filterStarred"> Starred only
                        </label>
                        <select id="sortSelect" class="sort-select">
                            <option value="modified">Recently Modified</option>
                            <option value="created">Recently Created</option>
                            <option value="name">Name (A-Z)</option>
                            <option value="cards">Card Count</option>
                        </select>
                    </div>
                </div>

                <!-- Card Sets Grid -->
                <div id="setsContainer" class="sets-grid">
                    <!-- Sets will be dynamically loaded here -->
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">ğŸ“š</div>
                    <h2>No study sets yet</h2>
                    <p>Create your first flashcard set to get started!</p>
                    <a href="create.html" class="btn btn-primary">Create Your First Set</a>
                </div>

                <!-- Floating Action Button -->
                <a href="create.html" class="fab" title="Create new set">
                    <span class="fab-icon">+</span>
                </a>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>&copy; 2024 QuizIt - Learn Smarter, Not Harder</p>
        </footer>
    </div>

    <!-- Set Card Template -->
    <template id="setCardTemplate">
        <div class="set-card" data-set-id="">
            <div class="set-card-header">
                <h3 class="set-title"></h3>
                <button class="star-btn" title="Star this set">â­</button>
            </div>
            <p class="set-description"></p>
            <div class="set-meta">
                <span class="card-count"></span>
                <span class="last-studied"></span>
            </div>
            <div class="set-stats">
                <div class="stat">
                    <span class="stat-label">Mastery</span>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="stat-value"></span>
                </div>
            </div>
            <div class="set-actions">
                <button class="btn btn-secondary study-btn" data-mode="flashcards">
                    ğŸ“‡ Flashcards
                </button>
                <button class="btn btn-secondary study-btn" data-mode="learn">
                    ğŸ“– Learn
                </button>
                <button class="btn btn-secondary study-btn" data-mode="test">
                    ğŸ“ Test
                </button>
                <button class="btn btn-secondary study-btn" data-mode="match">
                    ğŸ¯ Match
                </button>
            </div>
            <div class="set-footer">
                <button class="text-btn analytics-btn">ğŸ“Š Analytics</button>
                <button class="text-btn edit-btn">âœï¸ Edit</button>
                <button class="text-btn export-btn">ğŸ“¤ Export</button>
                <button class="text-btn delete-btn">ğŸ—‘ï¸ Delete</button>
            </div>
        </div>
    </template>

    <!-- Test Configuration Modal -->
    <div id="testConfigModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Configure Test</h2>
            <p>How many questions would you like in this test?</p>
            <div class="form-group">
                <label for="testQuestionCount" class="form-label">Number of questions:</label>
                <input
                    type="number"
                    id="testQuestionCount"
                    class="form-input"
                    min="1"
                    value="10"
                    style="width: 100%;"
                >
                <p style="font-size: 0.875rem; color: var(--text-tertiary); margin-top: 8px;">
                    <span id="testConfigHint"></span>
                </p>
            </div>
            <div class="modal-actions">
                <button id="cancelTestConfig" class="btn btn-secondary">Cancel</button>
                <button id="startTestConfig" class="btn btn-primary">Start Test</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Delete Study Set?</h2>
            <p>Are you sure you want to delete this set? This action cannot be undone.</p>
            <div class="modal-actions">
                <button id="cancelDelete" class="btn btn-secondary">Cancel</button>
                <button id="confirmDelete" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- Import Set Modal -->
    <div id="importSetModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Import Study Set</h2>
            <p>Select a QuizIt backup file (.json) to import a complete set with all progress data:</p>
            <div style="margin-bottom: 1rem;">
                <input type="file" id="importSetFile" accept=".json" style="display: none;">
                <button onclick="document.getElementById('importSetFile').click()" class="btn btn-secondary" style="width: 100%;">
                    ğŸ“ Choose File
                </button>
            </div>
            <p style="font-size: 0.875rem; color: var(--text-tertiary); margin-top: 8px;">
                This will create a new study set with all cards, images, and your learning progress.
            </p>
            <div class="modal-actions">
                <button id="cancelImportSet" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Export Set Modal -->
    <div id="exportSetModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Export Study Set</h2>
            <p>Download a complete backup including all cards, images, and your progress:</p>
            <div class="modal-actions">
                <button id="closeExportSet" class="btn btn-secondary">Cancel</button>
                <button id="downloadFullSet" class="btn btn-primary">ğŸ’¾ Download Backup</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
